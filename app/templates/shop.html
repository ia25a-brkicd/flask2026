{% extends 'base.html' %} {% block title %}Shop{% endblock %} {% block head %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='styles/shop.css') }}"
/>
{% endblock %} {% block content %}
<div class="shop-container">
  <div class="product-carousel">
    <div class="carousel-container">
      <!-- Slide 1 -->
      <div class="carousel-slide active" data-slide="0">
        <div class="product-image">
          <img src="{{ url_for('static', filename='images/SeifeAppleLemon.jpg') }}"
            alt="MainBildShop"
          />
        </div>
        <div class="product-info">
          <h1>Green Apple and Lemon </h1>
          <p>
            Handcrafted with real lavender flowers and essential oils. Relax
            your senses with every wash.
          </p>
          <button
            class="buy-btn"
            onclick="carouselBuyNow('Lavender Dream Soap', 12.99)"
          >
            Buy Now
          </button>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="carousel-slide" data-slide="1">
        <div class="product-image">
         <img src="{{ url_for('static', filename='images/SeifeGreenAppleLemonVanille.jpg') }}"
            alt="Rose Premium Soap"
          />
        </div>
        <div class="product-info">
          <h1>Green Apple & Lemon & Vanille Mix</h1>
          <p>
            Infused with rose petals and natural moisturizers. Experience luxury
            skincare daily.
          </p>
          <button
            class="buy-btn"
            onclick="carouselBuyNow('Rose Garden Soap', 13.99)"
          >
            Buy Now
          </button>
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="carousel-slide" data-slide="2">
        <div class="product-image">
          <img src="{{ url_for('static', filename='images/SeifeFloravis.jpg') }}"
            alt="Honey Premium Soap"
          />
        </div>
        <div class="product-info">
          <h1>Green Apple & Lemon with Stamp</h1>
          <p>
            Made with organic honey and oatmeal. Nourish and soften your skin
            naturally.
          </p>
          <button
            class="buy-btn"
            onclick="carouselBuyNow('Honey Glow Soap', 12.49)"
          >
            Buy Now
          </button>
        </div>
      </div>
    </div>

    <!-- Navigation Arrows -->
    <div class="carousel-navigation">
      <button class="carousel-arrow prev" onclick="changeSlide(-1)">
        <i class="fa fa-chevron-left"></i>
      </button>
      <div class="carousel-dots">
        <span class="dot active" onclick="goToSlide(0)"></span>
        <span class="dot" onclick="goToSlide(1)"></span>
        <span class="dot" onclick="goToSlide(2)"></span>
      </div>
      <button class="carousel-arrow next" onclick="changeSlide(1)">
        <i class="fa fa-chevron-right"></i>
      </button>
    </div>
  </div>

  <section class="products-section">
    <h2>Our Soaps</h2>
    <div class="products-grid">
      <div class="product-card">
        <img src="{{ url_for('static', filename='images/SeifeAppleLemon.jpg') }}"
          alt="Green Apple & Lemon"
        />
        <h3>Green Apple & Lemon</h3>
        <p class="price">12.99 CHF</p>
        <div class="pack-selector">
          <button class="pack-btn active" data-quantity="1">1</button>
          <button class="pack-btn" data-quantity="2">2</button>
          <button class="pack-btn" data-quantity="3">3</button>
        </div>
        <button class="add-to-cart-btn">Add to Shopping Cart</button>
      </div>

      <div class="product-card">
         <img src="{{ url_for('static', filename='images/SeifeGreenAppleLemonVanille.jpg') }}"
          alt="Green Apple & Lemon & Vanille Mix"
        />
        <h3>Green Apple & Lemon & Vanille Mix</h3>
        <p class="price">13.99 CHF</p>
        <div class="pack-selector">
          <button class="pack-btn active" data-quantity="1">1</button>
          <button class="pack-btn" data-quantity="2">2</button>
          <button class="pack-btn" data-quantity="3">3</button>
        </div>
        <button class="add-to-cart-btn">Add to Shopping Cart</button>
      </div>

      <div class="product-card">
          <img src="{{ url_for('static', filename='images/SeifeFloravis.jpg') }}"
          alt="Green Apple & Lemon with Stamp"
        />
        <h3>Green Apple & Lemon with Stamp</h3>
        <p class="price">14.99 CHF</p>
        <div class="pack-selector">
          <button class="pack-btn active" data-quantity="1">1</button>
          <button class="pack-btn" data-quantity="2">2</button>
          <button class="pack-btn" data-quantity="3">3</button>
        </div>
        <button class="add-to-cart-btn">Add to Shopping Cart</button>
      </div>

      <div class="product-card">
        <img
          src="{{ url_for('static', filename='images/SeifeGreenAppleLemon.jpg') }}"
          alt="Green Apple & Lemon"
        />
        <h3>Green Apple & Lemon</h3>
        <p class="price">11.99 CHF</p>
        <div class="pack-selector">
          <button class="pack-btn active" data-quantity="1">1</button>
          <button class="pack-btn" data-quantity="2">2</button>
          <button class="pack-btn" data-quantity="3">3</button>
        </div>
        <button class="add-to-cart-btn">Add to Shopping Cart</button>
      </div>

      <div class="product-card">
        <img
          src="{{ url_for('static', filename='images/GreenAppleLemon.jpg') }}"
          alt="Green Apple & Vanille"
        />
        <h3>Green Apple & Vanille</h3>
        <p class="price">12.49 CHF</p>
        <div class="pack-selector">
          <button class="pack-btn active" data-quantity="1">1</button>
          <button class="pack-btn" data-quantity="2">2</button>
          <button class="pack-btn" data-quantity="3">3</button>
        </div>
        <button class="add-to-cart-btn">Add to Shopping Cart</button>
      </div>

      <div class="product-card">
        <img
          src="{{ url_for('static', filename='images/GreenAppleVanille.jpg') }}"
          alt="Green Apple & Vanille"
        />
        <h3>Green Apple & Vanille</h3>
        <p class="price">13.49 CHF</p>
        <div class="pack-selector">
          <button class="pack-btn active" data-quantity="1">1</button>
          <button class="pack-btn" data-quantity="2">2</button>
          <button class="pack-btn" data-quantity="3">3</button>
        </div>
        <button class="add-to-cart-btn">Add to Shopping Cart</button>
      </div>
    </div>
  </section>
</div>

<script>
  // Carousel functionality
  let currentSlide = 0;
  const totalSlides = 3;

  function changeSlide(direction) {
    currentSlide += direction;
    if (currentSlide >= totalSlides) currentSlide = 0;
    if (currentSlide < 0) currentSlide = totalSlides - 1;
    updateCarousel();
  }

  function goToSlide(slideIndex) {
    currentSlide = slideIndex;
    updateCarousel();
  }

  function updateCarousel() {
    // Update slides
    document.querySelectorAll(".carousel-slide").forEach((slide, index) => {
      slide.classList.remove("active");
      if (index === currentSlide) {
        slide.classList.add("active");
      }
    });

    // Update dots
    document.querySelectorAll(".carousel-dots .dot").forEach((dot, index) => {
      dot.classList.remove("active");
      if (index === currentSlide) {
        dot.classList.add("active");
      }
    });
  }

  // Handle pack selection buttons
  document.querySelectorAll(".pack-btn").forEach((btn) => {
    btn.addEventListener("click", function () {
      // Remove active class from siblings
      this.parentElement.querySelectorAll(".pack-btn").forEach((sibling) => {
        sibling.classList.remove("active");
      });
      // Add active class to clicked button
      this.classList.add("active");
    });
  });

  // Handle add to cart buttons
  document.querySelectorAll(".add-to-cart-btn").forEach((btn) => {
    btn.addEventListener("click", function () {
      const productCard = this.closest(".product-card");
      const productName = productCard.querySelector("h3").textContent;
      const priceText = productCard.querySelector(".price").textContent;
      const price = parseFloat(priceText.replace(" CHF", "").replace(",", "."));
      const quantityBtn = productCard.querySelector(".pack-btn.active");
      const quantity = parseInt(quantityBtn.getAttribute("data-quantity")) || 1;

      // Call the global addToCart function from base.html with price
      addToCart(productName, quantity, price);
    });
  });

  // Handle carousel buy now buttons
  function carouselBuyNow(productName, price) {
    addToCart(productName, 1, price);
  }
</script>

{% endblock %}
